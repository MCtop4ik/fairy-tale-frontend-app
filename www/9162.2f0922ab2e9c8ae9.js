"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9162],{9162:(A,g,s)=>{s.r(g),s.d(g,{TalePageModule:()=>O});var d=s(6814),p=s(95),i=s(3582),c=s(3044),n=s(6689),f=s(1269);const _=["audioPlayer"];function h(t,r){1&t&&n._UZ(0,"div",23)}function m(t,r){1&t&&(n.TgZ(0,"span"),n._uU(1,"Play"),n.qZA())}function P(t,r){1&t&&(n.TgZ(0,"span"),n._uU(1,"Pause"),n.qZA())}function x(t,r){if(1&t){const o=n.EpF();n.TgZ(0,"button",24),n.NdJ("click",function(){n.CHM(o);const a=n.oxw(2);return n.KtG(a.playPause())}),n.YNc(1,m,2,0,"span",25),n.YNc(2,P,2,0,"span",25),n.qZA()}if(2&t){const o=n.oxw(2);n.xp6(1),n.Q6J("ngIf",!o.isPlaying),n.xp6(1),n.Q6J("ngIf",o.isPlaying)}}function T(t,r){if(1&t&&(n.TgZ(0,"div",13),n.YNc(1,h,1,0,"div",14),n.TgZ(2,"div",15),n._UZ(3,"audio",16,17),n.TgZ(5,"div",18),n.YNc(6,x,3,2,"button",19),n.TgZ(7,"div",20),n._UZ(8,"div",21),n.qZA(),n.TgZ(9,"div",22)(10,"span"),n._uU(11),n.qZA(),n._uU(12," / "),n.TgZ(13,"span"),n._uU(14),n.qZA()()()()()),2&t){const o=n.oxw();n.ekj("loading",o.isLoading),n.xp6(1),n.Q6J("ngIf",o.isLoading),n.xp6(2),n.Q6J("src",o.audioLink,n.LSH),n.xp6(3),n.Q6J("ngIf",!o.isLoading),n.xp6(2),n.Udp("width",o.progress+"%"),n.xp6(3),n.Oqu(o.currentTime),n.xp6(3),n.Oqu(o.duration)}}function v(t,r){if(1&t&&(n.TgZ(0,"ion-item")(1,"ion-label")(2,"div",31)(3,"h1",32),n._uU(4),n.qZA(),n.TgZ(5,"p",33),n._uU(6),n.qZA()()()()),2&t){const o=r.$implicit;n.xp6(4),n.AsE("",o.phrase," - ",o.translation,""),n.xp6(2),n.Oqu(o.transcription)}}function y(t,r){if(1&t&&(n.TgZ(0,"ion-accordion-group",26)(1,"ion-accordion",27)(2,"ion-item",28)(3,"ion-label"),n._uU(4,"Glossary"),n.qZA()(),n.TgZ(5,"div",29)(6,"ion-list"),n.YNc(7,v,7,3,"ion-item",30),n.qZA()()()()),2&t){const o=n.oxw();n.xp6(7),n.Q6J("ngForOf",o.tale.grammar)}}function b(t,r){if(1&t&&(n.TgZ(0,"ion-accordion-group",26)(1,"ion-accordion",34)(2,"ion-item",28)(3,"ion-label"),n._uU(4,"Text"),n.qZA()(),n._UZ(5,"div",35),n.qZA()()),2&t){const o=n.oxw();n.xp6(5),n.Q6J("innerHtml",o.tale.full_text,n.oJD)}}const Z=[{path:"",component:(()=>{var t;class r{constructor(e,a){this.route=e,this.httpService=a,this.id="1",this.tale={title:"undefined",author:{first_last:"undefined"},full_text:"undefined",bg_img:"https://pcvector.net/uploads/posts/2018-02/1517572511_bg-svg-gradient-min.png",grammar:[{phrase:"undefined",transcription:"undefined",translation:"undefined"}],video_src:"undefined"},this.segment_value="text",this.audioLink="https://sndup.net/"+this.tale.video_src+"/d",this.isPlaying=!1,this.currentTime="0:00",this.duration="0:00",this.progress=0,this.isLoading=!0,this.isAudio=!0}ngAfterViewInit(){if(this.isAudio){const e=this.audioPlayer.nativeElement;e.addEventListener("timeupdate",this.updateTime.bind(this)),e.addEventListener("loadedmetadata",this.loadedMetadata.bind(this)),e.addEventListener("canplaythrough",this.canPlayThrough.bind(this))}}ngOnInit(){this.route.params.subscribe(e=>this.id=e.id),this.getTale()}getTale(){console.log(this.id),this.tale=this.httpService.getTaleData()[this.id],"no audio"==this.tale.video_src?(this.audioLink="https://sndup.net/qjvx/",this.isAudio=!1):(this.audioLink="https://sndup.net/"+this.tale.video_src+"/d",this.isAudio=!0)}playPause(){const e=this.audioPlayer.nativeElement;e.paused?(e.play(),this.isPlaying=!0):(e.pause(),this.isPlaying=!1)}updateTime(e){const a=this.audioPlayer.nativeElement,l=a.currentTime,u=a.duration;this.currentTime=this.formatTime(l),this.progress=l/u*100}loadedMetadata(e){this.duration=this.formatTime(this.audioPlayer.nativeElement.duration)}canPlayThrough(e){this.isLoading=!1}formatTime(e){return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`}segmentChanged(e){console.log(e.detail.value),this.segment_value=e.detail.value}}return(t=r).\u0275fac=function(e){return new(e||t)(n.Y36(c.gz),n.Y36(f.O))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-tale"]],viewQuery:function(e,a){if(1&e&&n.Gf(_,5),2&e){let l;n.iGM(l=n.CRH())&&(a.audioPlayer=l.first)}},decls:32,vars:6,consts:[[3,"translucent"],["slot","start"],["defaultHref","/tales/morning"],[1,"background",3,"fullscreen"],[1,"card_floodfill"],["offset-md","3","size-md","6"],["class","audio-player-container",3,"loading",4,"ngIf"],["size-lg","4"],["value","text",3,"ionChange"],["value","text"],["value","glossary"],["expand","inset",4,"ngIf"],[1,"footer"],[1,"audio-player-container"],["class","loader",4,"ngIf"],[1,"audio-player"],["id","audioPlayer",3,"src"],["audioPlayer",""],[1,"controls"],[3,"click",4,"ngIf"],[1,"progress-bar"],[1,"progress"],[1,"time"],[1,"loader"],[3,"click"],[4,"ngIf"],["expand","inset"],["value","second"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[4,"ngFor","ngForOf"],[1,"phrase-container"],[1,"phrase"],[1,"transcription"],["value","first"],["slot","content",1,"ion-padding",3,"innerHtml"]],template:function(e,a){1&e&&(n.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),n._UZ(3,"ion-back-button",2),n.qZA(),n.TgZ(4,"ion-title"),n._uU(5),n.qZA()()(),n.TgZ(6,"ion-content",3)(7,"body")(8,"ion-grid")(9,"div",4)(10,"ion-card")(11,"ion-row")(12,"ion-col",5),n.YNc(13,T,15,9,"div",6),n.qZA()(),n.TgZ(14,"ion-card-title")(15,"ion-row")(16,"ion-col",7)(17,"ion-segment",8),n.NdJ("ionChange",function(u){return a.segmentChanged(u)}),n.TgZ(18,"ion-segment-button",9)(19,"ion-label"),n._uU(20,"Text"),n.qZA()(),n.TgZ(21,"ion-segment-button",10)(22,"ion-label"),n._uU(23,"Glossary"),n.qZA()()()()(),n.TgZ(24,"ion-row")(25,"ion-col"),n.YNc(26,y,8,1,"ion-accordion-group",11),n.YNc(27,b,6,1,"ion-accordion-group",11),n.qZA()()(),n._UZ(28,"ion-card-content"),n.qZA()()()(),n.TgZ(29,"footer",12)(30,"p"),n._uU(31,"\xa9Arseniy Zakharov 2024 \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b."),n.qZA()()()),2&e&&(n.Q6J("translucent",!0),n.xp6(5),n.hij("",a.tale.title," "),n.xp6(1),n.Q6J("fullscreen",!0),n.xp6(7),n.Q6J("ngIf",a.isAudio),n.xp6(13),n.Q6J("ngIf","glossary"==a.segment_value),n.xp6(1),n.Q6J("ngIf","text"==a.segment_value))},dependencies:[d.sg,d.O5,i.We,i.eh,i.Sm,i.PM,i.FN,i.Dq,i.wI,i.W2,i.jY,i.Gu,i.Ie,i.Q$,i.q_,i.Nd,i.cJ,i.GO,i.wd,i.sr,i.QI,i.oU],styles:['@charset "UTF-8";body[_ngcontent-%COMP%]{background:radial-gradient(circle,rgb(255,237,194) 0%,rgb(252,207,127) 100%)}.audio-container-error[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px 40px;max-width:500px;text-align:center;border:1px solid #ddd}.audio-player-container[_ngcontent-%COMP%]{position:relative;border:2px solid #007bff;padding:10px;border-radius:10px;display:flex;justify-content:center;align-items:center}.audio-player-container.loading[_ngcontent-%COMP%]   .audio-player[_ngcontent-%COMP%]{opacity:.5}.loader[_ngcontent-%COMP%]{position:absolute;width:40px;height:40px;border:4px solid #007bff;border-radius:50%;border-top:4px solid transparent;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.audio-player[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.audio-player[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.audio-player[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}.audio-player[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{width:200px;height:5px;background-color:#ddd;border-radius:5px;overflow:hidden}.audio-player[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:100%;background-color:#007bff;transition:width .1s}.audio-player[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-size:14px;color:#333}.accordion-content[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow-y:scroll}.phrase-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.phrase[_ngcontent-%COMP%]{font-size:1.2em;margin:0}.transcription[_ngcontent-%COMP%]{font-size:1em;margin:0;color:var(--ion-color-medium)}.footer[_ngcontent-%COMP%]{background-color:#f1f1f1;text-align:center;padding:20px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em;color:#000}']}),r})()}];let M=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),r})();var C=s(2898);let O=(()=>{var t;class r{}return(t=r).\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[d.ez,p.u5,i.Pc,M,C.D]}),r})()}}]);